(self.webpackChunk_2023pnm_seminar=self.webpackChunk_2023pnm_seminar||[]).push([[139],{1187:(e,t,n)=>{var i={"./arquero.js":9391,"./arrow.js":7938,"./dependencies.js":7363,"./dependency.js":170,"./dom/canvas.js":6342,"./dom/context2d.js":9733,"./dom/download.js":2938,"./dom/element.js":3380,"./dom/index.js":1820,"./dom/input.js":7585,"./dom/range.js":7170,"./dom/select.js":1106,"./dom/svg.js":5895,"./dom/text.js":281,"./dom/uid.js":1831,"./duckdb.js":3874,"./fileAttachment.js":3277,"./files/buffer.js":3825,"./files/index.js":6155,"./files/text.js":9974,"./files/url.js":2174,"./generators/disposable.js":2238,"./generators/filter.js":7254,"./generators/index.js":6785,"./generators/input.js":8044,"./generators/map.js":3921,"./generators/observe.js":1367,"./generators/queue.js":9042,"./generators/range.js":2707,"./generators/valueAt.js":5890,"./generators/worker.js":8179,"./html.js":6566,"./index.js":7138,"./leaflet.js":3861,"./library.js":4739,"./md.js":1715,"./mermaid.js":8843,"./mutable.js":221,"./now.js":3666,"./promises/delay.js":2984,"./promises/index.js":5898,"./promises/tick.js":2989,"./promises/when.js":7782,"./require.js":9204,"./resolve.js":5545,"./sqlite.js":4054,"./svg.js":4745,"./table.js":4199,"./template.js":9225,"./tex.js":667,"./that.js":5243,"./vegalite.js":423,"./width.js":282,"./xlsx.js":538};function a(e){return Promise.resolve().then((()=>{if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(i[e])}))}a.keys=()=>Object.keys(i),a.id=1187,e.exports=a},5162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(7294),a=n(6010);const r={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:n,className:l}=e;return i.createElement("div",{role:"tabpanel",className:(0,a.Z)(r.tabItem,l),hidden:n},t)}},4866:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(7462),a=n(7294),r=n(6010),l=n(2466),s=n(6550),o=n(1980),u=n(7392),c=n(12);function p(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:i,default:a}}=e;return{value:t,label:n,attributes:i,default:a}}))}function d(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function f(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const i=(0,s.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,o._X)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(i.location.search);t.set(r,e),i.replace({...i.location,search:t.toString()})}),[r,i])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,r=d(e),[l,s]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!f({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const i=n.find((e=>e.default))??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:t,tabValues:r}))),[o,u]=m({queryString:n,groupId:i}),[p,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[i,r]=(0,c.Nk)(n);return[i,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:i}),b=(()=>{const e=o??p;return f({value:e,tabValues:r})?e:null})();(0,a.useLayoutEffect)((()=>{b&&s(b)}),[b]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!f({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),h(e)}),[u,h,r]),tabValues:r}}var b=n(2389);const _={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(e){let{className:t,block:n,selectedValue:s,selectValue:o,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,l.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),i=u[n].value;i!==s&&(p(t),o(i))},f=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:l}=e;return a.createElement("li",(0,i.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:f,onClick:d},l,{className:(0,r.Z)("tabs__item",_.tabItem,l?.className,{"tabs__item--active":s===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:i}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==i}))))}function y(e){const t=h(e);return a.createElement("div",{className:(0,r.Z)("tabs-container",_.tabList)},a.createElement(g,(0,i.Z)({},e,t)),a.createElement(v,(0,i.Z)({},e,t)))}function w(e){const t=(0,b.Z)();return a.createElement(y,(0,i.Z)({key:String(t)},e))}},5532:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>me,contentTitle:()=>de,default:()=>ge,frontMatter:()=>pe,metadata:()=>fe,toc:()=>he});var i=n(7462),a=n(7294),r=n(3905),l=n(4866),s=n(5162);const o=n.p+"assets/images/4DSTEM-defocused-labeled-optimized-5d9783411b8876890cff077ac8be801b.gif";var u=n(7940);function c(e){return e`# Ptychography Helper Functions`}function p(e){return e.html`<hr class="hideable-md">`}function d(e){return e("https://cdn.jsdelivr.net/gh/nicolaspanel/numjs@0.16/dist/numjs.min.js")}function f(e){return e("https://bundle.run/ndarray-ops@1.2.2")}function m(e){return e("https://bundle.run/ndarray-complex@1.0.3")}function h(e,t){return function(n,i){let a=e.zeros(n.shape);return t.atan2(a.selection,n.selection,i.selection),a}}function b(e,t){return function(n,i){let a=e.zeros(n.shape);return t.lts(a.selection,n.selection,i),t.bandseq(a.selection,1),a}}function _(e,t,n){return class i{constructor(t){this.shape=t;let n=t.slice();n.push(2),this.data=e.zeros(n),this._nulls=new Array(t.length).fill(null)}re(){return this.data.pick(...this._nulls,0)}im(){return this.data.pick(...this._nulls,1)}abs(){return e.sqrt(this.abs_sqr())}abs_sqr(){return e.add(this.re().multiply(this.re()),this.im().multiply(this.im()))}angle(){return t(this.im(),this.re())}clone(){let e=new i(this.shape);return e.data=this.data.clone(),e}conjugate(){let t=this.re().clone(),a=this.im().clone();n.conjeq(t.selection,a.selection);let r=new i(this.shape);return r.data=e.stack([t,a],-1),r}multiply(t){let a=this.re().clone(),r=this.im().clone(),l=t.re(),s=t.im();n.muleq(a.selection,r.selection,l.selection,s.selection);let o=new i(this.shape);return o.data=e.stack([a,r],-1),o}real_multiply(t){let a=this.re().clone(),r=this.im().clone(),l=t,s=e.zeros(t.shape);n.muleq(a.selection,r.selection,l.selection,s.selection);let o=new i(this.shape);return o.data=e.stack([a,r],-1),o}scalar_multiply(t,a){let r=this.re().clone(),l=this.im().clone();n.mulseq(r.selection,l.selection,t,a);let s=new i(this.shape);return s.data=e.stack([r,l],-1),s}add(t){let a=this.re().clone(),r=this.im().clone(),l=t.re(),s=t.im();n.addeq(a.selection,r.selection,l.selection,s.selection);let o=new i(this.shape);return o.data=e.stack([a,r],-1),o}subtract(t){let a=this.re().clone(),r=this.im().clone(),l=t.re(),s=t.im();n.subeq(a.selection,r.selection,l.selection,s.selection);let o=new i(this.shape);return o.data=e.stack([a,r],-1),o}}}function g(e){return function(t,n){let i=e.zeros(t),a=1/(t*n),r=1+((t-1)/2|0);for(var l=0;l<r;l++)i.set(l,l*a);for(l=r;l<t;l++)i.set(l,(l-t)*a);return i}}function v(e){return function(t,n){let i=[t.size,n.size],a=[];a[0]=e.zeros(i),a[1]=e.zeros(i);for(let e=0;e<i[1];e++)for(let r=0;r<i[0];r++)a[0].set(r,e,t.get(r)),a[1].set(r,e,n.get(e));return a}}function y(e){return function(t){let[n,i]=t.shape,a=n/2|0,r=i/2|0,l=e.zeros([n,i]);return l.slice([null,a],[null,r]).assign(t.slice(-a,-r),!1),l.slice([null,a],r).assign(t.slice(-a,[null,r]),!1),l.slice(-a,-r).assign(t.slice([null,a],[null,r]),!1),l.slice(-a,[null,r]).assign(t.slice([null,a],-r),!1),l}}function w(e,t,n,i){return function(a,r){let[l,s]=a.shape,[o,u]=r,c=new e([l,s]);c.data=t.fft(a.data);let p=n(l,1),d=n(s,1),[f,m]=i(p,d),h=-2*Math.PI,b=t.add(f.multiply(o),m.multiply(u)).multiply(h),_=new e([l,s]),g=t.cos(b),v=t.sin(b);_.data=t.stack([g,v],-1);let y=c.multiply(_);return y.data=t.ifft(y.data),y}}function x(e){return function(t,[n,i]){let a=new e([n,i]),r=n/2|0,l=i/2|0;return a.data.slice([null,r],[null,l],null).assign(t.slice([null,r],[null,l],null),!1),a.data.slice(-r,[null,l],null).assign(t.slice(-r,[null,l],null),!1),a.data.slice([null,r],-l,null).assign(t.slice([null,r],-l,null),!1),a.data.slice(-r,-l,null).assign(t.slice(-r,-l,null),!1),a}}function j(e,t,n){return function(i,a){let[r,l]=i.shape;console.log(r);let s=new e([r,l]);s.data=t.fft(i.data);let[o,u]=[r/a|0,l/a|0],c=n(s.data,[o,u]);return c.data=t.ifft(c.data),c}}function k(){return function(e){let t=9.109383*1e-30,n=1602177e-24,i=299792458;return 662607e-39/Math.sqrt(2*t*n*e)/Math.sqrt(1+n*e/2/t/i/i)*1e11}}function z(e){return function(t){let n=9.109383*1e-30,i=1602177e-24,a=299792458,r=e(t);return 2*Math.PI/r/t*(n*a*a+i*t)/(2*n*a*a+i*t)}}function D(e,t,n,i,a,r,l){return class{constructor(t,n,i,a,r){this._gpts=t.slice(),this._sampling=n.slice(),this._energy=i,this._wavelength=e(i),this._semiangle_cutoff=a,this._defocus=r}_get_scattering_angles(){let e=t(this._gpts[0],this._sampling[0]),r=t(this._gpts[1],this._sampling[1]),[l,s]=n(e,r);return[i.sqrt(i.add(l.multiply(l.multiply(this._wavelength*this._wavelength)),s.multiply(s.multiply(this._wavelength*this._wavelength)))),a(l,s)]}_evaluate_aberrations(e,t){let n=this._defocus/this._wavelength*Math.PI,a=e.multiply(e).multiply(n),l=i.cos(a),s=i.sin(a),o=new r(a.shape);return o.data=i.stack([l,s],-1),o}_evaluate_aperture(e,t){let n=this._semiangle_cutoff/1e3,a=new r(e.shape),s=l(e,n);return a.data=i.stack([s,i.zeros(e.shape)],-1),a}build(){let[e,t]=this._get_scattering_angles(),n=this._evaluate_aberrations(e,t),a=this._evaluate_aperture(e,t),l=n.multiply(a);this._fourier_array=l;let s=new r(l.shape);s.data=i.ifft(l.data);let o=Math.sqrt(s.abs_sqr().sum());return this._array=s.scalar_multiply(1/o,0),this}}}function q(e){return e`https://observablehq.com/@mootari/notebook-data`}function E(e,t){const n=e.module();return n.variable(t()).define(["md"],c),n.variable(t()).define(["htl"],p),n.variable(t("nj")).define("nj",["require"],d),n.variable(t("ops")).define("ops",["require"],f),n.variable(t("cops")).define("cops",["require"],m),n.variable(t("atan2")).define("atan2",["nj","ops"],h),n.variable(t("lt_int_s")).define("lt_int_s",["nj","ops"],b),n.variable(t("ComplexNDArray")).define("ComplexNDArray",["nj","atan2","cops"],_),n.variable(t("fftfreq")).define("fftfreq",["nj"],g),n.variable(t("meshgrid2D")).define("meshgrid2D",["nj"],v),n.variable(t("fftshift2D")).define("fftshift2D",["nj"],y),n.variable(t("fourier_shift")).define("fourier_shift",["ComplexNDArray","nj","fftfreq","meshgrid2D"],w),n.variable(t("corner_crop")).define("corner_crop",["ComplexNDArray"],x),n.variable(t("fourier_downsample")).define("fourier_downsample",["ComplexNDArray","nj","corner_crop"],j),n.variable(t("electron_wavelength_angstroms")).define("electron_wavelength_angstroms",k),n.variable(t("electron_interaction_parameter")).define("electron_interaction_parameter",["electron_wavelength_angstroms"],z),n.variable(t("ComplexProbe")).define("ComplexProbe",["electron_wavelength_angstroms","fftfreq","meshgrid2D","nj","atan2","ComplexNDArray","lt_int_s"],D),n.variable(t()).define(["md"],q),n}function T(e){return e`# 4DSTEM Multislice Simulation

Below we simulate the diffraction intensity for an fcc-like material made of 7 [111] atomic layers, using the multislice algorithm.  

First, move your mouse around the potential to move the probe around.`}function I(e,t,n,i,a,r,l){let s=[];return e.visualization_checkboxes.includes("potential")&&(s=[...s,t]),e.visualization_checkboxes.includes("probe")&&(s=[...s,n]),e.visualization_checkboxes.includes("diffraction")&&(s=[...s,i]),a`<div style="display:flex; flex-wrap: wrap;">

${s.map((e=>r.legend({width:l.width,marginLeft:10,marginRight:10,label:e.label,color:{domain:e.domain,scheme:e.scheme,type:e.type,exponent:e.exponent,style:{background:"none"}}})))}`}function C(e,t,n,i,a,r,l,s,o,u,c){let p=10,d=[];e.visualization_checkboxes.includes("potential")&&(d=[...d,t]),e.visualization_checkboxes.includes("probe")&&(d=[...d,n]),e.visualization_checkboxes.includes("diffraction")&&(d=[...d,i]);let f=d.length,m=a.width*f,h=a.width/r[0]*r[1];return l.plot({width:m,height:h-20,padding:0,margin:0,x:{axis:null,range:[0,m]},y:{axis:null,range:[0,h]},marks:[l.cell(s.cross(s.range(f),[0]).map((([e,t])=>({a:e,b:t}))),{x:"a",y:"b",render:(e,{x:t,y:n},{x:i,y:a,channels:{x:{value:r},y:{value:l}}})=>s.create("svg:g").call((l=>l.selectAll().data(e).join("g").attr("transform",(e=>`translate(${i[e]+p},${a[e]})`)).append((e=>o(d,r[e],t.bandwidth()-20,n.bandwidth()-20))))).on("pointerenter pointermove",(e=>{let i=u(s.pointer(e),[p,0],[t.bandwidth()-20,n.bandwidth()-20]);null!==i&&(c.value=[i[0],i[1]])})).node()})]})}function S(e){return e`Once you get a feel for our mode of interaction, turn on the "diffraction" visualization panel to perform a multislice simulation at that probe position.

(Be please be patient, this is running client-side in your browser 😬)`}function M(e){return e.form({visualization_checkboxes:e.checkbox(["potential","probe","diffraction"],{value:["potential","probe"],label:"panels"}),use_multislice:e.toggle({label:"use multislice?",value:!1})})}function A(e){return e`Finally, play around with the defocus, convergence angle, and energy to see how the diffraction intensities change! You can also toggle the multislice formalism on/off to see how crude of an approximation the "single-slice" approximation is for a sample this thin.`}function N(e){return e`#### Simulation Parameters`}function P(e){return e.form({defocus:e.range([-250,250],{value:150,step:1,label:"defocus, \xc5"}),semiangle:e.range([5,30],{value:25,step:.5,label:"semiangle, mrad"}),energy:e.range([60,300],{value:80,step:10,label:"voltage, keV"}),width:e.range([100,500],{value:300,step:1,label:"width"})})}function V(e){return e.html`<hr class="hideable-md">`}async function Z(e,t){let n=new Float32Array(await e("FCC-slab-potential-7x244x242-float32.npy").arrayBuffer()),i=Array.from(n),a=t.zeros([7,244,242]);return a.selection.data=i,a}function L(e,t,n){let i=e(1e3*t.energy)/e(8e4);return n.multiply(i)}function F(e,t){return{label:"Projected Electrostatic Potential (rad)",domain:[0,Math.PI],scheme:"Purples",width:e.shape[2],height:e.shape[1],values:t.flatten().tolist()}}function $(e,t){let[n,i,a]=e.shape,r=t.zeros([i,a]);for(let l=0;l<n;l++){let t=e.pick(l,null,null);r=r.add(t)}return r}function O(e,t,n,i){let[a,r,l]=e.shape;return[...Array(a+1)].map(((s,o)=>{if(o<a){let i=new t([r,l]),a=e.pick(o,null,null),s=n.cos(a),u=n.sin(a);return i.data=n.stack([s,u],-1),i}{let e=new t([r,l]),a=n.cos(i),s=n.sin(i);return e.data=n.stack([a,s],-1),e}}))}function B(){return[.1,.1]}function R(e){return[e.shape[1],e.shape[2]]}function U(e,t,n,i){return new e(t,n,1e3*i.energy,i.semiangle,i.defocus).build()}function G(e,t,n,i){if(e.visualization_checkboxes.includes("probe")){let e=t(n._array,[i[1],-i[0]]).abs_sqr();return{label:"Illuminating Probe Intensity",scheme:"Greys",domain:[0,n._array.abs_sqr().max()],width:e.shape[1],height:e.shape[0],values:e.flatten().tolist()}}}function X(e,t,n,i,a){return function(r,l,s,o){let u=e(s)*Math.PI*o,c=t(r[0],l[0]),p=t(r[1],l[1]),[d,f]=n(c,p),m=i.add(d.multiply(d),f.multiply(f)).multiply(u),h=i.cos(m),b=i.sin(m),_=new a(r);return _.data=i.stack([h,b],-1),_}}function Y(e,t){return function(n,i){let a=new e(n.shape);return a.data=t.fft(n.data),a.data=t.ifft(a.multiply(i).data),a}}function H(e,t,n){return function(i,a){let[r,l,s]=i.shape,o=a.clone();for(let u=0;u<r;u++)o=o.multiply(e[u]),u+1<r&&(o=t(o,n));return o}}function J(e){return function(t,n){let i=n.clone();return i=i.multiply(e[t.shape[0]]),i}}function K(e,t,n,i,a,r){return function(l,s,[o,u]){let c=(e.use_multislice?t:n)(l,s),p=new i(c.shape);return p.data=a.fft(c.data),r(p.data,[o,u]).abs_sqr()}}function W(e,t,n,i){return e(t,n,1e3*i.energy,20/7)}function Q(e,t,n,i,a,r,l,s){if(e.visualization_checkboxes.includes("diffraction")){let e=s(t(n,i(a._array,[r[1],r[0]]),l));return{label:"Diffraction Intensities",scheme:"Magma",domain:[0,150],type:"pow",exponent:.5,width:e.shape[1],height:e.shape[0],values:e.flatten().tolist()}}}function ee(e){return[e[0]/2,e[1]/2]}function te(e){return(t,n,i,a)=>e.plot({width:i,height:a,margin:0,x:{axis:null},y:{axis:null},color:{label:t[n].label,domain:t[n].domain,scheme:t[n].scheme,type:t[n].type,exponent:t[n].exponent,style:{background:"none"}},style:{background:"none"},marks:[e.raster(t[n].values,{width:t[n].width,height:t[n].height}),e.frame({strokeWidth:1})]})}function ne(e){return function([t,n],[i,a],[r,l]){let[s,o]=[(t-i)/r,(n-a)/l];return s>1?null:[s*e[0],o*e[1]]}}function ie(e,t){const i=e.module();const a=new Map([["FCC-slab-potential-7x244x242-float32.npy",{url:new URL(n(6898),n.b),mimeType:"application/octet-stream",toString:function(){return this.url}}]]);i.builtin("FileAttachment",e.fileAttachments((e=>a.get(e)))),i.variable(t()).define(["md"],T),i.variable(t("visualization_legends")).define("visualization_legends",["viz_inputs_a","potential_dictionary","probe_dictionary","dp_dictionary","html","Plot","viz_inputs_b"],I),i.variable(t("main_visualization")).define("main_visualization",["viz_inputs_a","potential_dictionary","probe_dictionary","dp_dictionary","viz_inputs_b","gpts","Plot","d3","raster_subplot","left_panel_pixels_to_pos","mutable probe_xy"],C),i.variable(t()).define(["md"],S),i.variable(t("viewof viz_inputs_a")).define("viewof viz_inputs_a",["Inputs"],M),i.variable(t("viz_inputs_a")).define("viz_inputs_a",["Generators","viewof viz_inputs_a"],((e,t)=>e.input(t))),i.variable(t()).define(["md"],A),i.variable(t()).define(["md"],N),i.variable(t("viewof viz_inputs_b")).define("viewof viz_inputs_b",["Inputs"],P),i.variable(t("viz_inputs_b")).define("viz_inputs_b",["Generators","viewof viz_inputs_b"],((e,t)=>e.input(t))),i.variable(t()).define(["htl"],V);const r=e.module(E);return i.import("nj",r),i.import("ComplexNDArray",r),i.import("fftfreq",r),i.import("fftshift2D",r),i.import("corner_crop",r),i.import("meshgrid2D",r),i.import("fourier_shift",r),i.import("ComplexProbe",r),i.import("electron_wavelength_angstroms",r),i.import("electron_interaction_parameter",r),i.variable(t("potential_raw")).define("potential_raw",["FileAttachment","nj"],Z),i.variable(t("potential")).define("potential",["electron_interaction_parameter","viz_inputs_b","potential_raw"],L),i.variable(t("potential_dictionary")).define("potential_dictionary",["potential","projected_potential"],F),i.variable(t("projected_potential")).define("projected_potential",["potential","nj"],$),i.variable(t("complex_potentials")).define("complex_potentials",["potential","ComplexNDArray","nj","projected_potential"],O),i.variable(t("sampling")).define("sampling",B),i.variable(t("gpts")).define("gpts",["potential"],R),i.variable(t("real_space_probe")).define("real_space_probe",["ComplexProbe","gpts","sampling","viz_inputs_b"],U),i.variable(t("probe_dictionary")).define("probe_dictionary",["viz_inputs_a","fourier_shift","real_space_probe","probe_xy"],G),i.variable(t("propagator_array")).define("propagator_array",["electron_wavelength_angstroms","fftfreq","meshgrid2D","nj","ComplexNDArray"],X),i.variable(t("propagate_wavefunction")).define("propagate_wavefunction",["ComplexNDArray","nj"],Y),i.variable(t("multislice_propagation")).define("multislice_propagation",["complex_potentials","propagate_wavefunction","fixed_dz_propagator"],H),i.variable(t("singleslice_propagation")).define("singleslice_propagation",["complex_potentials"],J),i.variable(t("diffraction_intensity")).define("diffraction_intensity",["viz_inputs_a","multislice_propagation","singleslice_propagation","ComplexNDArray","nj","corner_crop"],K),i.variable(t("fixed_dz_propagator")).define("fixed_dz_propagator",["propagator_array","gpts","sampling","viz_inputs_b"],W),i.variable(t("dp_dictionary")).define("dp_dictionary",["viz_inputs_a","diffraction_intensity","potential","fourier_shift","real_space_probe","probe_xy","gpts","fftshift2D"],Q),i.define("initial probe_xy",["gpts"],ee),i.variable(t("mutable probe_xy")).define("mutable probe_xy",["Mutable","initial probe_xy"],((e,t)=>new e(t))),i.variable(t("probe_xy")).define("probe_xy",["mutable probe_xy"],(e=>e.generator)),i.variable(t("raster_subplot")).define("raster_subplot",["Plot"],te),i.variable(t("left_panel_pixels_to_pos")).define("left_panel_pixels_to_pos",["gpts"],ne),i}function ae(e){return e}function re(e){return e}function le(e){return e}function se(e){return e}function oe(e){return e.html`<hr class="hideable-md" >`}function ue(e,t){const n=e.module();n.variable(t()).define(["visualization_legends"],ae),n.variable(t()).define(["main_visualization"],re),n.variable(t()).define(["viewof viz_inputs_a"],le),n.variable(t()).define(["viewof viz_inputs_b"],se),n.variable(t()).define(["htl"],oe);const i=e.module(ie);return n.import("mutable probe_xy",i),n.import("probe_xy",i),n.import("main_visualization",i),n.import("visualization_legends",i),n.import("viewof viz_inputs_a",i),n.import("viz_inputs_a",i),n.import("viewof viz_inputs_b",i),n.import("viz_inputs_b",i),n}const ce=function(){const e=(0,a.useRef)();return(0,a.useEffect)((()=>{const t=new u.r_;return t.module(ue,u.lj.into(e.current)),()=>t.dispose()}),[]),a.createElement(a.Fragment,null,a.createElement("div",{ref:e}))},pe={id:"ptycho-bg_4dstem",sidebar_position:2,title:"4DSTEM",hide_table_of_contents:!0,hide_title:!0},de=void 0,fe={unversionedId:"ptycho-bg/ptycho-bg_4dstem",id:"ptycho-bg/ptycho-bg_4dstem",title:"4DSTEM",description:"4D Scanning Transmission Electron Microscopy",source:"@site/slides/ptycho-bg/ptycho-bg_4dstem.mdx",sourceDirName:"ptycho-bg",slug:"/ptycho-bg/ptycho-bg_4dstem",permalink:"/2023pnm-seminar/slides/ptycho-bg/ptycho-bg_4dstem",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"ptycho-bg_4dstem",sidebar_position:2,title:"4DSTEM",hide_table_of_contents:!0,hide_title:!0},sidebar:"tutorialSidebar",previous:{title:"Projection Set Algorithms",permalink:"/2023pnm-seminar/slides/ptycho-bg/ptycho-bg_projections"},next:{title:"Electron Ptychography",permalink:"/2023pnm-seminar/slides/ptycho-bg/ptycho-bg_epie"}},me={},he=[{value:"4D Scanning Transmission Electron Microscopy",id:"4d-scanning-transmission-electron-microscopy",level:2}],be={toc:he},_e="wrapper";function ge(e){let{components:t,...n}=e;return(0,r.kt)(_e,(0,i.Z)({},be,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"4d-scanning-transmission-electron-microscopy"},"4D Scanning Transmission Electron Microscopy"),(0,r.kt)(l.Z,{Lazy:!0,mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"schematic",label:"Schematic Description",default:!0,mdxType:"TabItem"},(0,r.kt)("figure",null,(0,r.kt)("img",{src:o,alt:"4DSTEM Schematic",width:"60%",height:"auto"}))),(0,r.kt)(s.Z,{value:"interactive-simulation",label:"Interactive Simulation",mdxType:"TabItem"},(0,r.kt)(ce,{mdxType:"Multislice4DstemComponent"}))))}ge.isMDXComponent=!0},6898:(e,t,n)=>{"use strict";e.exports=n.p+"b4465db3bc3bf3dd.bin"}}]);